Index: monopoly/Casilla.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package monopoly;\r\n\r\nimport partida.*;\r\nimport java.util.ArrayList;\r\nimport java.util.Map;\r\nimport java.util.HashMap;\r\n\r\n//Probando probando probando probandofijoiejfoewijwfoiwj\r\npublic class Casilla {\r\n\r\n    //Atributos:\r\n    private String nombre; //Nombre de la casilla\r\n    private String tipo; //Tipo de casilla (Solar, Especial, Transporte, Servicios, Comunidad, Suerte y Impuesto).\r\n    private float valor; //Valor de esa casilla (en la mayoría será valor de compra, en la casilla parking se usará como el bote).\r\n    private int posicion; //Posición que ocupa la casilla en el tablero (entero entre 1 y 40).\r\n    private Jugador duenho; //Dueño de la casilla (por defecto sería la banca).\r\n    private Grupo grupo; //Grupo al que pertenece la casilla (si es solar).\r\n    private float impuesto; //Cantidad a pagar por caer en la casilla: el alquiler en solares/servicios/transportes o impuestos.\r\n    private float hipoteca; //Valor otorgado por hipotecar una casilla\r\n    private ArrayList<Avatar> avatares; //Avatares que están situados en la casilla.\r\n    private float rentabilidad;\r\n    private int caidas;\r\n    boolean hipotecada=false;\r\n    private Map<String, Edificios> edificios; //Edificios construidos en la casilla (si es solar).\r\n\r\n\r\n    public Casilla() {\r\n    }//Parámetros vacíos\r\n\r\n    /*Constructor para casillas tipo Solar, Servicios o Transporte:\r\n    * Parámetros: nombre casilla, tipo (debe ser solar, serv. o transporte), posición en el tablero, valor y dueño.\r\n     */\r\n    @SuppressWarnings(\"Convert2Diamond\")\r\n    public Casilla(String nombre, String tipo, int posicion, float valor, Jugador duenho, float impuesto, float hipoteca) {\r\n        this.nombre = nombre;\r\n        this.tipo = tipo;\r\n        this.posicion = posicion;\r\n        this.valor = valor;\r\n        this.duenho = duenho;\r\n        this.impuesto = impuesto;\r\n        this.hipoteca = hipoteca;\r\n        this.avatares = new ArrayList<Avatar>();\r\n        this.rentabilidad=-impuesto;\r\n        this.hipotecada=false;\r\n        if(tipo.equals(\"Solar\")){\r\n            this.edificios = new HashMap<String, Edificios>();\r\n            this.edificios.put(\"casa\", new Edificios(\"casa\", Valor.getCosteCompraEdificio(posicion, \"casa\"), Valor.getCosteAlquilerEdificio(posicion, \"casa\"), 0, this));\r\n            this.edificios.put(\"hotel\", new Edificios(\"hotel\", Valor.getCosteCompraEdificio(posicion, \"hotel\"), Valor.getCosteAlquilerEdificio(posicion, \"hotel\"), false, this));\r\n            this.edificios.put(\"piscina\", new Edificios(\"piscina\", Valor.getCosteCompraEdificio(posicion, \"piscina\"), Valor.getCosteAlquilerEdificio(posicion, \"piscina\"), false, this));\r\n            this.edificios.put(\"deporte\", new Edificios(\"deporte\", Valor.getCosteCompraEdificio(posicion, \"deporte\"), Valor.getCosteAlquilerEdificio(posicion, \"deporte\"), false, this));\r\n        }\r\n    }\r\n\r\n    /*Constructor utilizado para inicializar las casillas de tipo IMPUESTOS.\r\n    * Parámetros: nombre, posición en el tablero, impuesto establecido y dueño.\r\n     */\r\n    public Casilla(String nombre, String tipo, int posicion, Jugador duenho, float impuesto) {\r\n        this.nombre = nombre;\r\n        this.tipo = tipo;\r\n        this.posicion = posicion;\r\n        this.duenho = duenho;\r\n        this.impuesto = impuesto;\r\n        this.avatares = new ArrayList<Avatar>();\r\n    }\r\n\r\n    /*Constructor utilizado para crear las otras casillas (Suerte, Caja de comunidad y Especiales):\r\n    * Parámetros: nombre, tipo de la casilla (será uno de los que queda), posición en el tablero y dueño.\r\n     */\r\n    public Casilla(String nombre, String tipo, int posicion, Jugador duenho) {\r\n        this.nombre = nombre;\r\n        this.tipo = tipo;\r\n        this.posicion = posicion;\r\n        this.duenho = duenho;\r\n        this.avatares = new ArrayList<Avatar>();\r\n    }\r\n\r\n    /***********GETTERS**********/\r\n    public String getNombre() {\r\n        return this.nombre;\r\n    }   \r\n    \r\n   public Grupo getGrupo() {\r\n        return this.grupo;\r\n    }\r\n\r\n    public String getTipo() {\r\n        return this.tipo;\r\n    }\r\n\r\n    public ArrayList<Avatar> getAvatares() {\r\n        return this.avatares;\r\n    }\r\n    \r\n    public String getColorCasilla() {\r\n        if (this.grupo != null) {\r\n            return this.grupo.getColorGrupo();\r\n        }\r\n        return Valor.WHITE;\r\n    }\r\n    public float getRentabilidad(){return this.rentabilidad;}\r\n    public Jugador getDuenho(){return this.duenho;}\r\n\r\n    public float getValor() {return this.valor;}\r\n\r\n    public float getImpuesto() {return this.impuesto;}\r\n\r\n    public float getHipoteca() {return this.hipoteca;}\r\n\r\n    public int getPosicion() {return this.posicion;}\r\n\r\n    public int getCaidas() {return this.caidas;}\r\n\r\n    public boolean getHipotecada() {return this.hipotecada;}\r\n\r\n    public Map<String, Edificios> getEdificios() {return this.edificios;}\r\n\r\n    /****************************/\r\n\r\n\r\n\r\n    /***********SETTERS**********/\r\n    public void setGrupo(Grupo grupo) {\r\n        this.grupo = grupo;\r\n    }\r\n    public void setCaidas(int caidas) {this.caidas = caidas;}\r\n    public void setDueño(Jugador duenho) {\r\n        this.duenho = duenho;\r\n    }\r\n    public void setValor(float valor) {\r\n        this.valor = valor;\r\n    }\r\n\r\n    public void setHipotecada(boolean hipotecada) {\r\n        this.hipotecada = hipotecada;\r\n    }\r\n    /****************************/\r\n\r\n    //Método utilizado para añadir un avatar al array de avatares en casilla.\r\n    public void anhadirAvatar(Avatar av) {\r\n        this.avatares.add(av);\r\n    }\r\n\r\n    //Método utilizado para eliminar un avatar del array de avatares en casilla.\r\n    public void eliminarAvatar(Avatar av) {\r\n        this.avatares.remove(av);\r\n    }\r\n\r\n    public void sumarFreq(){\r\n        this.caidas++;\r\n    }\r\n    /*Método para evaluar qué hacer en una casilla concreta. Parámetros:\r\n    * - Jugador cuyo avatar está en esa casilla.\r\n    * - La banca (para ciertas comprobaciones)-> temos que levar a conta de cantos cartos se recaudan\r\n    * - El valor de la tirada: para determinar impuesto a pagar en casillas de servicios.\r\n    * Valor devuelto: true en caso de ser solvente (es decir, de cumplir las deudas), y false\r\n    * en caso de no cumplirlas.\r\n    * En caso de non cumprirse, declárase como en bancarrota ao xogador, e dalle todas as súas propiedas ao outro xogador\r\n    * */\r\n    public boolean evaluarCasilla(Jugador actual, Jugador banca, int tirada,ArrayList<ArrayList<Casilla>> pos) {\r\n        if (this.duenho == banca) {\r\n            if (this.tipo.equals(\"Impuesto\")) {\r\n                if (actual.getFortuna() >= this.impuesto) {\r\n                    actual.sumarFortuna(-this.impuesto);\r\n                    actual.getEstatisticas().acImpPagado(this.impuesto);\r\n                    System.out.println(\"O xogador \" + actual.getNombre() + \" pagou \" + this.impuesto + \" á banca por caer na casilla \" + this.nombre + \".\\n\");\r\n                    banca.sumarFortuna(this.impuesto);\r\n                } else {\r\n                    System.out.println(\"O xogador \" + actual.getNombre() + \" non ten cartos para pagar os impostos da casilla \" + this.nombre + \".\\n\");\r\n                    return false;\r\n                }\r\n            } else if (this.tipo != null && this.tipo.equals(\"Especial\")) {\r\n                if (this.nombre != null && this.nombre.equals(\"Suerte\")) {\r\n                    loxicaSorte(banca,actual,pos);\r\n                } else if (this.nombre != null && this.nombre.equals(\"Caja\")) {\r\n                    loxicaComunidade(banca,actual,pos);\r\n                } else if (this.nombre != null && this.nombre.equals(\"Parking\")) {\r\n                    System.out.println(\"\\nO xogador \"+actual.getNombre()+\" recibirá \"+banca.getFortuna()+\" en impostos. \\n\");\r\n                    actual.sumarFortuna(banca.getFortuna());\r\n                    banca.setFortuna(0);\r\n                } else if (this.nombre != null && this.nombre.equals(\"IrCarcel\")) {\r\n                    System.out.println(\"\\nCaíches en IrCarcel, irás ao cárcere...\\n\");\r\n                    actual.encarcelar(pos);\r\n                    return true; //O xogador segue solvente aínda se na cárcel.\r\n                }\r\n            }\r\n        } else {\r\n            if ((this.duenho == actual)||hipotecada) {\r\n                if(hipotecada){\r\n                    System.out.println(\"\\nA casilla \"+this.nombre+\" está hipotecada, polo que non se paga aluguer.\\n\");\r\n                }\r\n                \r\n            } else {\r\n                // Si el dueño tiene todas las casillas del grupo, el impuesto es el doble\r\n                float impuestoSolar = this.impuesto;\r\n                int casas=this.edificios.get(\"casa\").getNumCasas();\r\n                boolean hotel=this.edificios.get(\"hotel\").getTenEdificio(), piscina=this.edificios.get(\"piscina\").getTenEdificio(), deporte=this.edificios.get(\"deporte\").getTenEdificio();\r\n                if (this.grupo != null && this.grupo.esDuenhoGrupo(this.duenho)&&casas==0&&!hotel&&!piscina&&!deporte) {\r\n                    System.out.println(\"\\nO dono da casilla \" + this.nombre + \" ten todas as casillas do grupo, polo que o imposto a pagar será o dobre.\\n\");\r\n                    impuestoSolar *= 2;\r\n                }else{\r\n                    impuestoSolar=0; //Imposto base 0, imos sumar o das construccións SOLO\r\n                    if(casas>0){\r\n                        impuestoSolar=this.edificios.get(\"casa\").getAlquiler()*casas;\r\n                        System.out.println(\"\\nO dono da casilla \"+this.nombre+\" ten \"+casas+\" casas, con alquiler de \"+this.edificios.get(\"casa\").getAlquiler()+\" cada unha.\\n\");\r\n                    }\r\n                    if (hotel) {\r\n                        impuestoSolar += this.edificios.get(\"hotel\").getAlquiler();\r\n                        System.out.println(\"\\nO dono da casilla \"+this.nombre+\" ten un hotel, con alquiler de \"+this.edificios.get(\"hotel\").getAlquiler()+\".\\n\");\r\n                    }\r\n                    if (piscina) {\r\n                        impuestoSolar += this.edificios.get(\"piscina\").getAlquiler();\r\n                        System.out.println(\"\\nO dono da casilla \"+this.nombre+\" ten unha piscina, con alquiler de \"+this.edificios.get(\"piscina\").getAlquiler()+\".\\n\");\r\n                    }\r\n                    if (deporte) {\r\n                        impuestoSolar += this.edificios.get(\"deporte\").getAlquiler();\r\n                        System.out.println(\"\\nO dono da casilla \"+this.nombre+\" ten unha pista, con alquiler de \"+this.edificios.get(\"deporte\").getAlquiler()+\".\\n\");   \r\n                    }\r\n                }\r\n\r\n                if (this.tipo != null && (this.tipo.equals(\"Solar\"))) {\r\n                    impuestoSolar = this.impuesto;\r\n                    if (actual.getFortuna() >= impuestoSolar) {\r\n                        actual.getEstatisticas().transAlq(impuestoSolar);\r\n                        this.sumarRentabilidad(impuestoSolar);\r\n                        actual.sumarFortuna(-impuestoSolar);\r\n                        if (this.duenho != null) {\r\n                            this.duenho.sumarFortuna(impuestoSolar);\r\n                        }\r\n                        System.out.println(\"O xogador \" + actual.getNombre() + \" pagou \" + impuestoSolar + \" ao xogador \" + (this.duenho != null ? this.duenho.getNombre() : \"Desconocido\") + \" por caer na casilla \" + this.nombre + \".\\n\");\r\n                    } else {\r\n                        System.out.println(\"O xogador \" + actual.getNombre() + \" non ten suficientes cartos para pagar o aluguer da casilla \" + this.nombre + \".\\n\");\r\n                        return false;\r\n                    }\r\n                } else if(this.tipo != null && this.tipo.equals(\"Transportes\")) {\r\n                    int numTransportes = 0;\r\n                    Jugador propietario = this.duenho;\r\n                    for (Casilla propiedad : propietario.getPropiedades()) {\r\n                        if (propiedad.getTipo() != null && propiedad.getTipo().equals(\"Transportes\") && !propiedad.hipotecada) {\r\n                            numTransportes++;\r\n                        }\r\n                    }\r\n                    System.out.println(\"\\nO dono da casilla \" + this.nombre + \" ten \" + numTransportes + \" transportes, polo que o imposto multiplicarase por \" + numTransportes + \".\\n\");\r\n                    float impuestoTransporte = this.impuesto * numTransportes;\r\n                    if(tirada == 0){\r\n                        impuestoTransporte *= 2;\r\n                    }\r\n                    if (actual.getFortuna() >= impuestoTransporte) {\r\n                        actual.getEstatisticas().transAlq(impuestoTransporte);\r\n                        this.sumarRentabilidad(impuestoTransporte);\r\n                        actual.sumarFortuna(-impuestoTransporte);\r\n                        if (this.duenho != null) {\r\n                            this.duenho.sumarFortuna(impuestoTransporte);\r\n                        }\r\n                        System.out.println(\"O xogador \" + actual.getNombre() + \" pagou \" + impuestoTransporte + \" ao xogador \" + (this.duenho != null ? this.duenho.getNombre() : \"Desconocido\") + \" por caer na casilla \" + this.nombre + \".\\n\");\r\n                    } else {\r\n                        System.out.println(\"O xogador \" + actual.getNombre() + \" non tes suficientes cartos para pagar o transporte da casilla \" + this.nombre + \".\\n\");\r\n                        return false;\r\n                    }\r\n                } else if (this.tipo != null && this.tipo.equals(\"Servicios\")) {\r\n                    Jugador propietario = this.duenho;\r\n                    int numServicios = 0;\r\n                    for (Casilla propiedad : propietario.getPropiedades()) {\r\n                        if (propiedad.getTipo() != null && propiedad.getTipo().equals(\"Servicios\") && !propiedad.hipotecada) {\r\n                            numServicios++;\r\n                        }\r\n                    }\r\n                    int multiplicador=2;\r\n                    if(numServicios==2){\r\n                        multiplicador=4;\r\n                    }\r\n                    System.out.println(\"\\nO dono da casilla \" + this.nombre + \" ten \" + numServicios + \" servizos, polo que o imposto multiplicarase por \" + multiplicador + \".\\n\");\r\n                    float impuestoServicios = this.impuesto * tirada * multiplicador;\r\n                    if (actual.getFortuna() >= impuestoServicios) {\r\n                        this.sumarRentabilidad(impuestoServicios);\r\n                        actual.getEstatisticas().transAlq(impuestoServicios);\r\n                        actual.sumarFortuna(-impuestoServicios);\r\n                        if (this.duenho != null) {\r\n                            this.duenho.sumarFortuna(impuestoServicios);\r\n                        }\r\n                        System.out.println(\"O xogador \" + actual.getNombre() + \" pagou \" + impuestoServicios + \" ao xogador \" + (this.duenho != null ? this.duenho.getNombre() : \"Desconocido\") + \" por caer en la casilla \" + this.nombre + \".\\n\");\r\n                    } else {\r\n                        System.out.println(\"O xogador \" + actual.getNombre() + \" non ten suficientes cartos para pagar o servizo da casilla \" + this.nombre + \".\\n\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Lóxica de sorte\r\n     */\r\n    private void loxicaSorte(Jugador banca,Jugador actual, ArrayList<ArrayList<Casilla>> pos){\r\n\r\n        switch(banca.getIndexsorte()){\r\n            case 0:\r\n                //Moverse a la casilla solar 19\r\n                System.out.println(\"Oh no excursión á solar 19\\n\");\r\n                Casilla casactual=actual.getAvatar().getLugar();\r\n                if(casactual.getPosicion()==36){\r\n                    actual.sumarFortuna(Valor.SUMA_VUELTA);\r\n                    actual.getEstatisticas().sumarsalidas();\r\n                    actual.getEstatisticas().sumarVoltas();\r\n                }\r\n                casactual.eliminarAvatar(actual.getAvatar());\r\n                Casilla dest = actual.getAvatar().posIndex(32,pos);\r\n                dest.anhadirAvatar(actual.getAvatar());\r\n                actual.getAvatar().setLugar(dest);\r\n                banca.sumarSorte();\r\n                break;\r\n            case 1:\r\n                System.out.println(\"\\nVai o cárcere, sen pasar pola casilla de saída.\\n\");\r\n                actual.getEstatisticas().sumarCarcel();\r\n                if(actual.getAvatar().getLugar().getPosicion()!=7){\r\n                    actual.getEstatisticas().sumarVoltas();\r\n                }\r\n                actual.encarcelar(pos);\r\n                banca.sumarSorte();\r\n                break;\r\n            case 2:\r\n                System.out.println(\"\\nRecibes 1.000.000! Lucky you...\\n\");\r\n                //Recibir 1.000.000\r\n                actual.sumarFortuna(1000000);\r\n                actual.getEstatisticas().sumarbote(1000000);\r\n                banca.sumarSorte();\r\n                break;\r\n            case 3:\r\n                System.out.println(\"\\nPaga a cada xogador 250.000€\\n\");\r\n                //Paga a cada xogador 250.000\r\n                float bote = 250000;\r\n                for(ArrayList<Casilla> lado: pos){\r\n                    for(Casilla cas: lado){\r\n                        for(Avatar av: cas.getAvatares()){\r\n                                if(!av.getJugador().equals(actual)){\r\n                                    actual.getEstatisticas().acImpPagado(bote);\r\n                                    actual.sumarFortuna(-bote);\r\n                                    av.getJugador().sumarFortuna(bote);\r\n                                    av.getJugador().getEstatisticas().sumarbote(bote);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                banca.sumarSorte();\r\n                break;\r\n            case 4:\r\n                System.out.println(\"Oh no! Retrocedes tres casillas\\n\");\r\n                //Retroceder tres casillas\r\n                casactual=actual.getAvatar().getLugar();\r\n                casactual.eliminarAvatar(actual.getAvatar());\r\n                int posdest= casactual.getPosicion()-3;\r\n                dest = actual.getAvatar().posIndex(posdest,pos);\r\n                dest.anhadirAvatar(actual.getAvatar());\r\n                actual.getAvatar().setLugar(dest);\r\n                banca.sumarSorte();\r\n                evaluarCasilla(actual,banca,0,pos);\r\n                break;\r\n            case 5:\r\n                System.out.println(\"Múltanche por usar o teléfono mentres conduces, paga 150000 euros\\n\");\r\n                //Múltanche por usar o tlf mentres conduces, paga 150000\r\n                actual.sumarFortuna(-150000);\r\n                banca.sumarFortuna(150000);\r\n                actual.getEstatisticas().acImpPagado(150000);\r\n                banca.sumarSorte();\r\n                break;\r\n            case 6:\r\n                System.out.println(\"Avanza cara a casilla máis cercana\\n\");\r\n                //Avanza ata a casilla de transporte máis cercana, se non ten dono podes mercala. Se o ten, pagas o doble do habitual\r\n                boolean iterado= false;\r\n                for(int novacas : Valor.transportes){\r\n                    if(actual.getAvatar().getLugar().getPosicion()<novacas && !iterado){\r\n                        casactual=actual.getAvatar().getLugar();\r\n                        casactual.eliminarAvatar(actual.getAvatar());\r\n                        dest = actual.getAvatar().posIndex(novacas,pos);\r\n                        dest.anhadirAvatar(actual.getAvatar());\r\n                        actual.getAvatar().setLugar(dest);\r\n                        iterado = true;\r\n                    }\r\n                }\r\n                evaluarCasilla(actual,banca,0,pos);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Lóxica comunidade\r\n     */\r\n    private void loxicaComunidade(Jugador banca,Jugador actual, ArrayList<ArrayList<Casilla>> pos){\r\n        switch(banca.getIndexsorte()){\r\n            case 0:\r\n                System.out.println(\"\\nPaga unha multa de 500000 euros por un fin de semana nun balneario de 5 estrelas\\n\");\r\n                actual.sumarFortuna(-500000);\r\n                break;\r\n            case 1:\r\n                System.out.println(\"\\nVas á cárcel sin pasar por casilla de salida e sin cobrar\\n\");\r\n                actual.encarcelar(pos);\r\n                actual.getEstatisticas().sumarCarcel();\r\n                break;\r\n            case 2:\r\n                //Colócate en casilla de salida cobrando 200000\r\n                System.out.println(\"\\nVas á casilla de saída, cobrando 2000000 euros.\\n\");\r\n                Casilla casactual=actual.getAvatar().getLugar();\r\n                casactual.eliminarAvatar(actual.getAvatar());\r\n                Casilla dest = actual.getAvatar().posIndex(0,pos);\r\n                dest.anhadirAvatar(actual.getAvatar());\r\n                actual.getEstatisticas().sumarVoltas();\r\n                actual.sumarFortuna(Valor.SUMA_VUELTA);\r\n                actual.getEstatisticas().sumarsalidas();\r\n                actual.getAvatar().setLugar(dest);\r\n                break;\r\n            case 3:\r\n                System.out.println(\"Devolución de Facenda, recibes 500000)\\n\");\r\n                actual.sumarFortuna(500000);\r\n                actual.getEstatisticas().sumarbote(500000);\r\n                break;\r\n            case 4:\r\n                System.out.println(\"Retrocede a Solar1\\n\");\r\n                casactual=actual.getAvatar().getLugar();\r\n                casactual.eliminarAvatar(actual.getAvatar());\r\n                dest= actual.getAvatar().posIndex(1,pos);\r\n                dest.anhadirAvatar(actual.getAvatar());\r\n                actual.getAvatar().setLugar(dest);\r\n                evaluarCasilla(actual,banca,0,pos);\r\n                break;\r\n            case 5:\r\n                System.out.println(\"Vas ó Solar20\\n\");\r\n                casactual=actual.getAvatar().getLugar();\r\n                casactual.eliminarAvatar(actual.getAvatar());\r\n                dest= actual.getAvatar().posIndex(34,pos);\r\n                dest.anhadirAvatar(actual.getAvatar());\r\n                actual.getAvatar().setLugar(dest);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    /*Método usado para comprar una casilla determinada. Parámetros:\r\n    * - Jugador que solicita la compra de la casilla.\r\n    * - Banca del monopoly (es el dueño de las casillas no compradas aún).*/\r\n    public void comprarCasilla(Jugador solicitante, Jugador banca) {\r\n       if(this.getDuenho()==banca) {\r\n           solicitante.anhadirPropiedad(this);\r\n           this.duenho = solicitante;\r\n           solicitante.sumarFortuna(-this.valor);\r\n           solicitante.getEstatisticas().pagoinversion(this.valor);\r\n              System.out.println(\"\\nO xogador \" + solicitante.getNombre() + \" comprou a casilla \" + this.nombre + \" por \" + this.valor + \" euros.\\n\");\r\n       }\r\n       else {\r\n           System.out.println(\"\\nA casilla xa ten dono.\\n\");\r\n       }\r\n    }\r\n\r\n    public void hipotecarCasilla() {\r\n        this.hipotecada = true;\r\n        this.duenho.sumarFortuna(this.hipoteca);\r\n        System.out.println(\"\\nA casilla \" + this.nombre + \" foi hipotecada por \" + this.hipoteca + \" euros.\\n Ata que a deshipoteques, non poderás cobrar aluguer por esta casilla.\\n\");\r\n        if(this.grupo!=null){\r\n            System.out.println(\"Ademais, tampouco poderás construir no grupo \"+Valor.getNombreColor(this.grupo.getColorGrupo())+\".\\n\");\r\n        }\r\n\r\n    }\r\n\r\n    public void deshipotecarCasilla() {\r\n        if(this.duenho.getFortuna() < this.hipoteca) {\r\n            System.out.println(\"\\nNon tes suficiente fortuna para deshipotecar esta casilla. Tes \"+this.duenho.getFortuna()+\" euros, pero necesitas \"+this.hipoteca+\" euros.\\n\");\r\n            return;\r\n        }\r\n        this.hipotecada = false;\r\n        this.duenho.sumarFortuna(-this.hipoteca);\r\n        System.out.println(\"\\nA casilla \" + this.nombre + \" foi deshipotecada por \" + this.hipoteca + \" euros.\\n Xa podes cobrar aluguer por esta casilla.\\n\");\r\n        if(this.grupo != null){\r\n            System.out.println(\"Ademais, xa podes construir no grupo \"+Valor.getNombreColor(this.grupo.getColorGrupo())+\".\\n\");\r\n        }\r\n    }\r\n\r\n    /*Método para añadir valor a una casilla. Utilidad:\r\n    * - Sumar valor a la casilla de parking.\r\n    * - Sumar valor a las casillas de solar al no comprarlas tras cuatro vueltas de todos los jugadores. Esto es porrazo no está en ningún sitio\r\n    * Este método toma como argumento la cantidad a añadir del valor de la casilla.*/\r\n    public void sumarValor(float suma) {\r\n        this.setValor(this.valor + suma);\r\n    }\r\n\r\n    public void edificar(String tipo, Jugador jugadorActual){\r\n        int precioConstrucion = this.edificios.get(tipo).getCusto();\r\n        int numCasas = this.edificios.get(\"casa\").getNumCasas();\r\n        boolean hotelConstruido = this.edificios.get(\"hotel\").getTenEdificio();\r\n        boolean piscinaConstruida = this.edificios.get(\"piscina\").getTenEdificio();\r\n        boolean pistaConstruida = this.edificios.get(\"deporte\").getTenEdificio();\r\n        if(tipo.equals(\"casa\")){\r\n            if(numCasas>=4){\r\n                System.out.println(\"Xa tes o número máximo de casa permitidas na casilla\");\r\n                return;\r\n            }\r\n            if(jugadorActual.getFortuna()<precioConstrucion){\r\n                System.out.println(\"Non tes suficiente fortuna para construír unha casa nesta casilla, custa \"+precioConstrucion+\"€\");\r\n                return;\r\n            }\r\n            if(hotelConstruido||piscinaConstruida||pistaConstruida){\r\n                System.out.println(\"Non podes construír máis casas nesta casilla, xa tes un hotel ou unha instalación deportiva ou piscina construída\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).anhadirCasa();\r\n        }\r\n        //ESTO PÖDESE MODULARIZAR MOITO MOITO MOITO; DE MOMENTO DAME PEREZA\r\n        if(tipo.equals(\"hotel\")){\r\n            if(hotelConstruido){\r\n                System.out.println(\"Xa tes un hotel construido\");\r\n                return;\r\n            }\r\n            if(piscinaConstruida){\r\n                System.out.println(\"Non podes construír un hotel nesta casilla, xa tes unha piscina construída\");\r\n                return;\r\n            }\r\n            if(pistaConstruida){\r\n                System.out.println(\"Non podes construír un hotel nesta casilla, xa tes unha instalación deportiva construída\");\r\n                return;\r\n            }\r\n            if(numCasas!=4){\r\n                System.out.println(\"Necesitas ter 4 casas nesta casilla para construír un hotel\");\r\n                return;\r\n            }\r\n            if(jugadorActual.getFortuna()<precioConstrucion){\r\n                System.out.println(\"Non tes suficiente fortuna para construír un hotel nesta casilla, custa \"+precioConstrucion+\"€\");\r\n                return;\r\n            }\r\n            this.edificios.get(\"casa\").setNumCasas(0);\r\n            this.edificios.get(tipo).setTenEdificio(true);\r\n        }\r\n        if(tipo.equals(\"piscina\")){\r\n            if(piscinaConstruida){\r\n                System.out.println(\"Xa tes unha piscina construída\");\r\n                return;\r\n            }\r\n            if(pistaConstruida){\r\n                System.out.println(\"Non podes construír unha piscina nesta casilla, xa tes unha instalación deportiva construída\");\r\n                return;\r\n            }\r\n            if(!hotelConstruido){\r\n                System.out.println(\"Necesitas ter un hotel nesta casilla para construír unha piscina\");\r\n                return;\r\n            }\r\n            if(jugadorActual.getFortuna()<precioConstrucion){\r\n                System.out.println(\"Non tes suficiente fortuna para construír unha piscina nesta casilla, custa \"+precioConstrucion+\"€\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).setTenEdificio(true);\r\n        }\r\n        if(tipo.equals(\"deporte\")){\r\n            if(pistaConstruida){\r\n                System.out.println(\"Xa tes unha instalación deportiva construída\");\r\n                return;\r\n            }\r\n            if(!hotelConstruido || !piscinaConstruida){\r\n                System.out.println(\"Necesitas ter un hotel e unha piscina nesta casilla para construír unha instalación deportiva\");\r\n                return;\r\n            }\r\n            if(jugadorActual.getFortuna()<precioConstrucion){\r\n                System.out.println(\"Non tes suficiente fortuna para construír unha instalación deportiva nesta casilla, custa \"+precioConstrucion+\"€\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).setTenEdificio(true);\r\n        }\r\n\r\n        System.out.println(\"Construiches un/a \"+tipo+\" na casilla \"+this.getNombre()+\" por \"+precioConstrucion+\"€\");\r\n        jugadorActual.sumarFortuna(-precioConstrucion);\r\n        jugadorActual.getEstatisticas().pagoinversion(precioConstrucion);\r\n    }\r\n\r\n\r\n    public void vender(String tipo, int numEdificios, Jugador jugadorActual){\r\n        int numCasas = this.edificios.get(\"casa\").getNumCasas();\r\n        boolean hotelConstruido = this.edificios.get(\"hotel\").getTenEdificio();\r\n        boolean piscinaConstruida = this.edificios.get(\"piscina\").getTenEdificio();\r\n        boolean pistaConstruida = this.edificios.get(\"deporte\").getTenEdificio();\r\n\r\n        if(tipo.equals(\"casa\")){\r\n            if(numCasas<numEdificios){\r\n                System.out.println(\"Non tes tantas casas construídas nesta casilla, no solar \"+this.getNombre()+\" tes \"+numCasas+\" casas construídas\");\r\n                return;\r\n            }else if(numEdificios>numCasas){\r\n                System.out.println(\"Non tes tantas casas construídas nesta casilla, no solar \"+this.getNombre()+\" tes \"+numCasas+\" casas construídas\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).setNumCasas(numCasas - numEdificios);\r\n        }\r\n        if(tipo.equals(\"hotel\")){\r\n            if(!hotelConstruido){\r\n                System.out.println(\"Non tes un hotel construído nesta casilla\");\r\n                return;\r\n            }\r\n            if(numEdificios>1){\r\n                System.out.println(\"Non poder haber \"+numEdificios+\" construidos, só un\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).setTenEdificio(false);\r\n        }\r\n        if(tipo.equals(\"piscina\")){\r\n            if(!piscinaConstruida){\r\n                System.out.println(\"Non tes unha piscina construída nesta casilla\");\r\n                return;\r\n            }\r\n            if(numEdificios>1){\r\n                System.out.println(\"Non poder haber \"+numEdificios+\" construidos, só unha\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).setTenEdificio(false);\r\n        }\r\n        if(tipo.equals(\"deporte\")){\r\n            if(!pistaConstruida){\r\n                System.out.println(\"Non tes unha instalación deportiva construída nesta casilla\");\r\n                return;\r\n            }\r\n            if(numEdificios>1){\r\n                System.out.println(\"Non poder haber \"+numEdificios+\" construidos, só unha\");\r\n                return;\r\n            }\r\n            this.edificios.get(tipo).setTenEdificio(false);\r\n        }\r\n        jugadorActual.sumarFortuna((this.edificios.get(tipo).getCusto())*numEdificios);\r\n        System.out.println(\"Vendeches \"+numEdificios+\" \"+tipo+\" na casilla \"+this.getNombre()+\" por \"+(this.edificios.get(tipo).getCusto())*numEdificios+\"€\");\r\n    }\r\n\r\n    /*Método para mostrar información sobre una casilla.\r\n    * Devuelve una cadena con información específica de cada tipo de casilla.*/\r\n    public String infoCasilla() {\r\n        String info = new String();\r\n        info+= \"\\n{\\nTipo: \" + this.tipo;\r\n        info+= \"\\nGrupo: \" + this.grupo.getColorGrupo();\r\n        info+= \"\\nPropietario: \" + this.duenho.getNombre();\r\n        info+= \"\\nValor: \" + this.valor;\r\n        info+= \"\\nAlquiler: \" + this.impuesto;\r\n        info+= \"\\nHipoteca: \" + this.hipoteca;\r\n        info+= \"\\n}\";\r\n        return info;\r\n    }\r\n\r\n    private void sumarRentabilidad(float cantidad){\r\n        this.rentabilidad+=cantidad;\r\n    }\r\n    /* Método para mostrar información de una casilla en venta.\r\n     * Valor devuelto: texto con esa información.\r\n     */\r\n    public String casEnVenta() {\r\n        if(this.duenho!=null && this.duenho.getNombre().equalsIgnoreCase(\"Banca\")) {\r\n        return \"\\n{\\nTipo: \" + this.tipo + \"\\ngrupo: \" + this.grupo.getColorGrupo() + \"\\nValor: \" + this.valor + \"\\nAlquiler: \" + this.impuesto + \"\\nHipoteca: \" + this.hipoteca + \"\\n}\";\r\n        }\r\n        return \"\";\r\n        //return \"\\nA casilla non está en venda.\\n\";\r\n    }\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        if(this.tipo.equals(\"Solar\")){\r\n            sb.append(\"{\\n\\tnombre: \").append(this.nombre).append(\"\\n\");\r\n            sb.append(\" \\ttgrupo: \").append(Valor.getNombreColor(this.grupo.getColorGrupo())).append(\"\\n\");\r\n            sb.append(\" \\ttipo: \").append(this.tipo).append(\"\\n\");\r\n            sb.append(\" \\tpropietario: \").append(this.duenho.getNombre()).append(\"\\n\");\r\n            sb.append(\" \\tvalor: \").append(this.valor).append(\"\\n\");\r\n            sb.append(\" \\talquiler: \").append(this.impuesto).append(\"\\n\");\r\n            sb.append(\" \\tvalor casa: \").append(this.edificios.get(\"casa\").getCusto()).append(\"\\n\");\r\n            sb.append(\" \\tvalor hotel: \").append(this.edificios.get(\"hotel\").getCusto()).append(\"\\n\");\r\n            sb.append(\" \\tvalor piscina: \").append(this.edificios.get(\"piscina\").getCusto()).append(\"\\n\");\r\n            sb.append(\" \\tvalor deporte: \").append(this.edificios.get(\"deporte\").getCusto()).append(\"\\n\");\r\n            sb.append(\" \\talquiler casa: \").append(this.edificios.get(\"casa\").getAlquiler()).append(\"\\n\");\r\n            sb.append(\" \\talquiler hotel: \").append(this.edificios.get(\"hotel\").getAlquiler()).append(\"\\n\");\r\n            sb.append(\" \\talquiler piscina: \").append(this.edificios.get(\"piscina\").getAlquiler()).append(\"\\n\");\r\n            sb.append(\" \\talquiler deporte: \").append(this.edificios.get(\"deporte\").getAlquiler()).append(\"\\n}\");\r\n        }\r\n        else if(this.tipo.equals(\"Transportes\") || this.tipo.equals(\"Servicios\")){\r\n            sb.append(\"{\\tnombre: \").append(this.nombre).append(\"\\n\");\r\n            sb.append(\" \\ttipo: \").append(this.tipo).append(\"\\n\");\r\n            sb.append(\" \\tpropietario: \").append(this.duenho.getNombre()).append(\"\\n\");\r\n            sb.append(\" \\tvalor: \").append(this.valor).append(\"\\n\");\r\n            sb.append(\" \\talquiler: \").append(this.impuesto).append(\"\\n}\");\r\n        }\r\n        else if(this.tipo.equals(\"Impuesto\")){\r\n            sb.append(\"{\\n\\ttipo: \").append(this.tipo).append(\"\\n\");\r\n            sb.append(\" \\timpuesto: \").append(this.impuesto).append(\"\\n}\");\r\n        }\r\n        else if(this.nombre.equalsIgnoreCase(\"Parking\")){\r\n            sb.append(\"{\\tbote: TENO A BANCA E EEEEE\");\r\n            sb.append(\" \\tXogadores na casilla: [\");\r\n            for(Avatar avatarEnCasilla: this.avatares){\r\n                sb.append(avatarEnCasilla.getJugador().getNombre()).append(\", \");\r\n            }\r\n            sb.append(\"]\\n}\");\r\n        }\r\n        else if(this.nombre.equalsIgnoreCase(\"Cárcel\")){\r\n            sb.append(\"{\\tCusto salir: 5000000\\n\");\r\n            sb.append(\" \\tXogadores na casilla: [\");\r\n            for(Avatar avatarEnCasilla: this.avatares){\r\n                sb.append(avatarEnCasilla.getJugador().getNombre()).append(\", \");\r\n            }\r\n            sb.append(\"]\\n}\");\r\n        }else{\r\n            sb.append(\"{\\tnombre: \").append(this.nombre).append(\"\\n\");\r\n            sb.append(\" \\ttipo: \").append(this.tipo).append(\"\\n}\");\r\n        }\r\n        return sb.toString();\r\n    }\r\n}\r\n   \r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/monopoly/Casilla.java b/monopoly/Casilla.java
--- a/monopoly/Casilla.java	(revision c0b33f874d2f202c9da9d7556d8f654fbee4f581)
+++ b/monopoly/Casilla.java	(date 1763492503170)
@@ -514,14 +514,6 @@
                 System.out.println("Xa tes un hotel construido");
                 return;
             }
-            if(piscinaConstruida){
-                System.out.println("Non podes construír un hotel nesta casilla, xa tes unha piscina construída");
-                return;
-            }
-            if(pistaConstruida){
-                System.out.println("Non podes construír un hotel nesta casilla, xa tes unha instalación deportiva construída");
-                return;
-            }
             if(numCasas!=4){
                 System.out.println("Necesitas ter 4 casas nesta casilla para construír un hotel");
                 return;
@@ -537,10 +529,6 @@
             if(piscinaConstruida){
                 System.out.println("Xa tes unha piscina construída");
                 return;
-            }
-            if(pistaConstruida){
-                System.out.println("Non podes construír unha piscina nesta casilla, xa tes unha instalación deportiva construída");
-                return;
             }
             if(!hotelConstruido){
                 System.out.println("Necesitas ter un hotel nesta casilla para construír unha piscina");
